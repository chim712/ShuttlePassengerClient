<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>노선 선택</title>
  <style>
    /* 모바일 퍼스트 스타일 */
    :root { --fg:#111; --sub:#666; --bg:#fff; --card:#f9f9f9; --border:#e6e6e6; }
    * { box-sizing:border-box; -webkit-tap-highlight-color: transparent; }
    html, body {
      margin:0; padding:0;
      color:var(--fg); background:var(--bg);
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Apple SD Gothic Neo, Pretendard, sans-serif;
    }

    .wrap { max-width: 420px; margin: 0 auto; }

    /* ---------- 상단 헤더 ---------- */
    .page-header {
      position: sticky; top: 0; z-index: 10;
      display: flex; align-items: center; justify-content: center;
      background: var(--bg); border-bottom: 1px solid var(--border);
      padding: 12px 16px;
    }
    .page-header h1 {
      margin: 0;
      font-size: 18px;
      text-align: center;
      flex-grow: 1;
    }
    .back-btn {
      position: absolute;
      left: 12px;
      top: 50%;
      transform: translateY(-50%);
      font-size: 20px;
      text-decoration: none;
      color: var(--fg);
      font-weight: 500;
      line-height: 1;
      padding: 6px;
      border-radius: 8px;
      transition: background .1s ease;
    }
    .back-btn:active { background: rgba(0,0,0,0.08); }

    /* ---------- 리스트 영역 ---------- */
    .list-wrap {
      padding: 8px 12px 16px;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    a.card-link {
      color: inherit;
      text-decoration: none;
      display: block;
      width: 100%;
    }

    .route-card {
      display: flex;
      flex-direction: row;
      align-items: center;
      gap: 12px;
      min-height: 64px;
      width: 100%;
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 12px 14px;
      cursor: pointer;
      transition: transform .06s ease, box-shadow .06s ease;
    }
    .route-card:active { transform: scale(0.99); }
    .route-card:hover { box-shadow: 0 2px 10px rgba(0,0,0,.06); }

    /* ---------- 좌측 번호/태그 ---------- */
    .left {
      display: flex;
      align-items: center;
      gap: 8px;
      width: 110px;
      flex-shrink: 0;
    }
    .tag {
      display:inline-block;
      font-size:11px;
      font-weight:700;
      border-radius:999px;
      padding:4px 8px;
      white-space:nowrap;
    }
    .tag-up   { background:#e8f2ff; color:#0b62d6; }
    .tag-down { background:#fff0f0; color:#c62828; }
    .tag-circ { background:#eefaf1; color:#2e7d32; }
    .tag-etc  { background:#eee;    color:#444; }

    .rnum {
      font-size: 26px;
      font-weight: 800;
      line-height: 1;
      letter-spacing: .3px;
      min-width: 52px;
      text-align: right;
    }

    /* ---------- 우측 제목/ID ---------- */
    .right {
      display:flex;
      flex-direction:column;
      gap:2px;
      min-width:0;
      flex:1;
    }
    .title {
      font-size:14px;
      line-height:1.25;
      overflow:hidden;
      text-overflow:ellipsis;
      white-space:nowrap;
    }
    .meta {
      font-size:12px;
      color:var(--sub);
    }

    @media (min-width:600px) {
      .wrap { max-width:480px; }
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header class="page-header">
      <a href="/" class="back-btn" aria-label="뒤로가기">〈</a>
      <h1>노선 선택</h1>
    </header>

    <main class="list-wrap">
      {%- for it in routes -%}
        {%- set kind = (
            '순환' if it.routeType == 'CIRCULATION'
            else '상행' if it.routeType == 'ROUND_TRIP_UP'
            else '하행' if it.routeType == 'ROUND_TRIP_DOWN'
            else it.routeType
          )
        -%}
        {%- set kindClass = (
            'tag-circ' if it.routeType == 'CIRCULATION'
            else 'tag-up' if it.routeType == 'ROUND_TRIP_UP'
            else 'tag-down' if it.routeType == 'ROUND_TRIP_DOWN'
            else 'tag-etc'
          )
        -%}

        <a class="card-link" href="{{ jump_base.rstrip('/') }}/{{ it.routeId }}"
           aria-label="노선 {{ it.routeNumber }} - {{ it.routeTitle }}">
          <article class="route-card">
            <div class="left">
              <span class="tag {{ kindClass }}">{{ kind }}</span>
              <span class="rnum">{{ it.routeNumber }}</span>
            </div>
            <div class="right">
              <div class="title">{{ it.routeTitle }}</div>
              <div class="meta">ID #{{ it.routeId }}</div>
            </div>
          </article>
        </a>
      {%- endfor -%}
    </main>
  </div>
</body>
</html>
